<!DOCTYPE html>
<html lang="en">

<head>
    <title>Cory Gardner: 2020 Senate Race | The Denver Post</title>
    <meta charset="utf-8">
    <meta name="robots" content="noindex,follow">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Roboto|Roboto+Condensed:700|Roboto+Mono" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.16/css/dataTables.foundation.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/foundation/6.2.4/foundation.min.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.2.1/css/responsive.dataTables.min.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.2.1/css/responsive.foundation.min.css" />
    <!-- <link rel="stylesheet" href="jquery.dataTables.yadcf.css" /> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.14/c3.css" />
    <link rel="stylesheet" href="../css/styles.css" />
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.js"></script>
    <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.16/js/dataTables.foundation.min.js"></script>
    <script src="https://cdn.jsdelivr.net/foundation/6.2.4/foundation.min.js"></script>
    <script src="https://cdn.datatables.net/plug-ins/1.10.16/dataRender/datetime.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.2.1/js/dataTables.responsive.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.2.1/js/responsive.foundation.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/yadcf/0.9.2/jquery.dataTables.yadcf.js"></script>
    <script src="https://extras.denverpost.com/app/homicide-report/js/d3.v3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.14/c3.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tabletop.js/1.5.1/tabletop.min.js"></script>
</head>

<body>
    <div class="row">
        <div id="gardner-section" class="large-10 large-centered medium-10 medium-centered columns">
            <nav aria-label="You are here:" role="navigation">
                <ul class="breadcrumbs">
                    <li><a href="../index.html">Home</a></li>
                    <li>
                        <span class="show-for-sr">Current: </span> Cory Gardner
                    </li>
                </ul>
            </nav>
            <h3 class="blurb-title">Cory Gardner <div class="tag-rep"></div>
            </h3>
            <img class="blurb-headshot" src="../images/cory-gardner-cropped.jpg">
            <p class="blurb-bio">Incumbent U.S. Senator, 45</p>
            <p class="blurb">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla scelerisque, felis a tempus iaculis, urna eros mattis ante, quis scelerisque urna nisl id eros. Curabitur vel orci elit. Vivamus vitae nisl mauris. Nunc gravida molestie lorem et fringilla. Vestibulum egestas ante ut ante pellentesque, in bibendum tellus eleifend. Ut non ex ex. Nullam id velit sodales, efficitur orci vitae, volutpat ante. Ut sollicitudin mi sit amet nisl lobortis interdum. Maecenas mi nisl, ullamcorper non odio non, pulvinar placerat orci. Suspendisse feugiat elit eget tortor iaculis aliquet. Praesent non urna et leo varius eleifend non convallis eros. <em><a href="https://www.denverpost.com/tag/cory-gardner/" target="_blank">Read Cory Gardner coverage &rarr;</a></em></p>
            <!-- <div class="callout secondary">
                <p><strong>Fundraising as of <span id="gardner-date"></span></strong><br>
                    <span class="blurb-fundraising">$<span id="gardner-cash"></span> cash on hand &bull; $<span id="gardner-raised"></span> raised during last quarter<br><a href="#fundraising-charts">View charts</a></span></p>
            </div> -->
            <!-- <hr> -->
        </div>
    </div>
    <div class="row" id="gardner-fundraising-charts">
        <div class="large-12 large-centered columns">
            <div class="callout secondary">
                <p class="chart-container-title">Fundraising Summary</p>
                <p>As of <span id="gardner-date"></span>, Cory Gardner had $<span id="gardner-cash"></span> on hand and raised $<span id="gardner-raised"></span> in the last quarter. <em>Hover over or click chart for details.</em>
                    <div class="large-4 medium-4 columns">
                        <p class="chart-title">Total contributions<br>and transfers</p>
                        <div id="donations-quarterly"></div>
                        <p class="source">Source: <a href="https://www.fec.gov/data/reports/house-senate/?is_amended=false&data_type=processed&committee_id=C00492454&cycle=2020" target="_blank">FEC quarterly report </a>
                    </div>
                    <div class="large-4 medium-4 columns">
                        <p class="chart-title">Individual contributions<br>2019</p>
                        <div id="donations-breakdown"></div>
                        <p class="source">Source: <a href="https://www.fec.gov/data/committee/C00492454/?tab=raising&cycle=2020" target="_blank">FEC individual contributions</a>
                    </div>
                    <p>&nbsp;</p>
            </div>
        </div>
    </div>
    <div id="contributions-table-container">
        <div class="row">
            <div class="large-12 columns">
                <h2 class="table-title">Search Cory Gardner's campaign contributions</h2>
                <p>Use the dropdown filters to isolate contributions by donor type (PAC, individual, etc.), name, employer or state, or search by a specific term. Click the column headers to sort the data. <strong>Source: Federal Election Commission</strong></em></p>
                <!-- <p style="color:#990012;font-style:italic;text-align:center">Click column headers to sort data; use dropdown menus to filter data</p> -->
            </div>
        </div>
        <div id="filters">
            <div class="row">
                <div class="large-3 medium-3 small-6 columns">
                    <span id="filter-1" style="font-weight: bold;"></span>
                </div>
                <div class="large-3 medium-3 small-6 columns">
                    <span id="filter-2" style="font-weight: bold;"></span>
                </div>
                <div class="large-3 medium-3 small-6 columns">
                    <span id="filter-3" style="font-weight: bold;"></span>
                </div>
                <div class="large-3 medium-3 small-6 end columns">
                    <span id="filter-4" style="font-weight: bold;"></span>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="large-12 columns">
                <table id="contributions-table" cellspacing="0" width="100%">
                    <thead>
                        <tr>
                            <th></th>
                            <th>Candidate</th>
                            <th data-priority="1">Donor</th>
                            <th data-priority="4">Type</th>
                            <th>City</th>
                            <th>State</th>
                            <th>ZIP code</th>
                            <th>Employer</th>
                            <th>Occupation</th>
                            <th>Receipt type</th>
                            <th data-priority="2">Amount</th>
                            <th data-priority="3">YTD total</th>
                            <th>Year</th>
                            <th>Quarter</th>
                            <th>Election type</th>
                            <th>PDF link</th>
                        </tr>
                    </thead>
                    <tfoot>
                    </tfoot>
                    <tbody>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <script>
    //$.getJSON('../data/gardner_test.json', function(data) {
    $.getJSON('../data/gardner_fec_test.json', function(data) {
        console.log(data);

        // var gardnerQ1 = [];
        // var gardnerQ12019 = data.filter(obj => {
        //     return obj.report_type === 'Q1'&& return obj.report_year == 2019
        // })
        // console.log(gardnerQ1);

        var gardnerQ12019 = data.filter(function(el) {
            return el.report_type === 'Q1' &&
                el.report_year == 2019;
        });
        console.log(gardnerQ12019);

        var gardnerQ22019 = data.filter(function(el) {
            return el.report_type === 'Q2' &&
                el.report_year == 2019;
        });
        console.log(gardnerQ22019);

        var gardnerQ32019 = data.filter(function(el) {
            return el.report_type === 'Q3' &&
                el.report_year == 2019;
        });
        console.log(gardnerQ32019);

        var gardnerQ42019 = data.filter(function(el) {
            return el.report_type === 'Q4' &&
                el.report_year == 2019;
        });
        console.log(gardnerQ42019);


        var quarters = [];
        if (gardnerQ12019.length != 0) {
            quarters.push(gardnerQ12019[0].report_type);
        }
        if (gardnerQ22019.length != 0) {
            quarters.push(gardnerQ22019[0].report_type);
        }
        if (gardnerQ32019.length != 0) {
            quarters.push(gardnerQ32019[0].report_type);
        }
        if (gardnerQ42019.length != 0) {
            quarters.push(gardnerQ12019[0].report_type);
        }
        console.log(quarters);

        var individualDonations = [];
        if (gardnerQ12019.length != 0) {
            individualDonations.push(gardnerQ12019[0].total_individual_contributions_period);
        }
        if (gardnerQ22019.length != 0) {
            individualDonations.push(gardnerQ22019[0].total_individual_contributions_period);
        }
        if (gardnerQ32019.length != 0) {
            individualDonations.push(gardnerQ32019[0].total_individual_contributions_period);
        }
        if (gardnerQ42019.length != 0) {
            individualDonations.push(gardnerQ42019[0].total_individual_contributions_period);
        }
        console.log(individualDonations);

        for (i = 0; i < quarters.length; i++) {
            var obj = {};
            obj[quarters[i]] = 0;
            individualDonations.push(obj);
        }
        console.log(obj);

        /*** UN-COMMENT BELOW WHEN THEY FILE ***/
        // document.getElementById('gardner-date').innerHTML = lastDate;
        // document.getElementById('gardner-raised').innerHTML = gardnerRaised;
        // document.getElementById('gardner-cash').innerHTML = gardnerCash;

        /*** BAR CHART ***/
        var donationsQuarterly = c3.generate({
            bindto: '#donations-quarterly',
            data: {
                // x: 'x',
                // columns: [
                //     ['x', 'Total election cycle', 'Q1 2019', 'Q2 2019', 'Q3 2019'],
                //     ['Individuals', 4460391, 1033301, 961869, 1532721],
                //     ['Political party committees', 44600, 0, 44600, 0],
                //     ['Other political committees (PACs)', 3195878, 694283, 626098, 385987],
                //     ['Transfers from other authorized committees', 1638763, 275228, 376686, 532655]
                // ],
                json: gardnerQ12019,
                keys: {
                    x: 'report_type',
                    value: ['total_individual_contributions_period', 'political_party_committee_contributions_period', 'other_political_committee_contributions_period', 'transfers_from_other_authorized_committee_period'],

                    // x: 'x',
                    // columns: [
                    //     //['x', 'date'],
                    //     ['Individuals', 'Political party committees', 'Other political committees (PACs)', 'Transfers from other authorized committees']
                    // ]
                },
                names: {
                    total_individual_contributions_period: 'Individuals',
                    political_party_committee_contributions_period: 'Political party committees',
                    other_political_committee_contributions_period: 'Other political committees (PACs)',
                    transfers_from_other_authorized_committee_period: 'Transfers from other authorized committees'
                },
                type: 'bar',
                groups: [
                    //['Individuals', 'Political party committees', 'Other political committees (PACs)', 'Transfers from other authorized committees']
                    ['total_individual_contributions_period', 'political_party_committee_contributions_period', 'other_political_committee_contributions_period', 'transfers_from_other_authorized_committee_period']
                ],
                order: 'desc',
                colors: {
                    'total_individual_contributions_period': '#5e3c99',
                    'transfers_from_other_authorized_committee_period': '#807dba',
                    'other_political_committee_contributions_period': '#e66101',
                    'political_party_committee_contributions_period': '#fdb863'
                }
            },
            padding: {
                bottom: 40
            },
            axis: {
                x: {
                    type: 'category',
                },
                y: {
                    tick: {
                        //values: [3000000, 5000000, 7000000, 9000000],
                        format: function(d) {
                            return d3.format('$.1s')(d)
                        }
                    },
                }
            },
            tooltip: {
                format: {
                    value: function(value, ratio, id) {
                        return d3.format('$,')(value)
                    }
                }
            },
            grid: {
                x: {
                    show: true
                },
                y: {
                    show: true
                }
            }
        });
    });
    </script>
</body>

</html>