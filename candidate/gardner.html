<!DOCTYPE html>
<html lang="en">

<head>
    <title>Cory Gardner: 2020 Senate Race | The Denver Post</title>
    <meta charset="utf-8">
    <meta name="robots" content="noindex,follow">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href="https://fonts.googleapis.com/css?family=Roboto|Roboto+Condensed:700|Roboto+Mono" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.16/css/dataTables.foundation.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/foundation/6.2.4/foundation.min.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.2.1/css/responsive.dataTables.min.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.2.1/css/responsive.foundation.min.css" />
    <!-- <link rel="stylesheet" href="jquery.dataTables.yadcf.css" /> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.14/c3.css" />
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.js"></script>
    <script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.16/js/dataTables.foundation.min.js"></script>
    <script src="https://cdn.jsdelivr.net/foundation/6.2.4/foundation.min.js"></script>
    <script src="https://cdn.datatables.net/plug-ins/1.10.16/dataRender/datetime.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.2.1/js/dataTables.responsive.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.2.1/js/responsive.foundation.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/yadcf/0.9.2/jquery.dataTables.yadcf.js"></script>
    <script src="https://extras.denverpost.com/app/homicide-report/js/d3.v3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.14/c3.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tabletop.js/1.5.1/tabletop.min.js"></script>
    <style>
    body {
        background-color: #fafafa;
        font-family: 'Roboto', sans-serif;
    }

    .table-title {
        font-weight: 700;
        font-size: 1.75em;
        line-height: 120%;
    }

    #filters {
        font-size: .85rem;
    }

    #best-grants-table-container {
        margin-top: 10px;
        padding: 3px;
    }

    #best-grants-table {
        font-size: .85rem;
        font-family: 'Roboto', sans-serif;
    }

    button.yadcf-filter-reset-button {
        color: red;
        margin-left: 10px;
    }

    select {
        margin-top: 7px;
        margin-bottom: 0;
        font-size: .85rem;
    }

    .yadcf-filter-range {
        height: 2.9em;
        border: 1px solid silver;
    }

    .filter-text {
        font-weight: bold;
        margin-top: .5em;
        margin-bottom: .5em;
    }

    .row-color {
        background-color: #e4e4e4 !important;
    }

    tr {
        background-color: #fafafa !important;
        border-bottom: 1px solid silver;
    }

    table,
    thead,
    tbody {
        border: none !important;
    }

    button.yadcf-filter-reset-button {
        color: #990012;
        font-weight: normal;
    }

    .chart-title {
        font-size: 1.5rem;
        text-align: center
    }
    </style>
</head>

<body>
    <div class="row">
        <div class="large-12 columns">
            <div class="large-6 columns">
                <h3 class="chart-title">Primary</h3>
                <div id="donations-primary"></div>
            </div>
            <div class="large-6 columns">
                <h3 class="chart-title">General</h3>
                <div id="donations-general"></div>
            </div>
        </div>
    </div>
    <div id="best-grants-table-container">
        <div class="row">
            <div class="large-12 columns">
                <h2 class="table-title">Cory Gardner</h2>
                <p>Chatter and chatter and chatter and chatter and chatter and chatter and chatter and chatter and chatter and chatter and chatter and chatter and chatter and chatter and chatter and chatter and chatter and chatter and chatter. <strong>Source: Federal Election Commission</strong></em></p>
                <p style="color:#990012;font-style:italic;text-align:center">Click column headers to sort data; use dropdown menus to filter data</p>
            </div>
        </div>
        <div id="filters">
            <div class="row">
                <div class="large-3 medium-3 columns">
                    <span id="filter-1" style="font-weight: bold;"></span>
                </div>
                <div class="large-3 medium-3 columns">
                    <span id="filter-2" style="font-weight: bold;"></span>
                </div>
                <div class="large-3 medium-3 end columns">
                    <span id="filter-3" style="font-weight: bold;"></span>
                </div>
            </div>
            <div class="row">
                <div class="large-12 columns">
                    <table id="best-grants-table" cellspacing="0" width="100%">
                        <thead>
                            <tr>
                                <th></th>
                                <th data-priority="1">Name</th>
                                <th data-priority="2">Year</th>
                                <th>Quarter</th>
                                <th>Type</th>
                                <th>Donor name</th>
                                <th>City</th>
                                <th>State</th>
                                <th>ZIP code</th>
                                <th>Employer</th>
                                <th>Occupation</th>
                                <th>Receipt type</th>
                                <th>Amount</th>
                                <th>YTD total</th>
                                <th>Election type</th>
                                <th>PDF link</th>
                            </tr>
                        </thead>
                        <tfoot>
                        </tfoot>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <script>
        /*** CHARTS ***/
        // var barDonationType = c3.generate({
        //     bindto: '#donation-type',
        //     size: {
        //         height: 400
        //         //width: 800
        //     },
        //     data: {
        //         columns: [
        //             ['Campaign committee', 2000, 0],
        //             ['Individual', 500, 1000]
        //         ],
        //         type: 'bar',
        //         groups: [
        //             ['Campaign committee', 'Individual']
        //         ]

        //         // colors: {
        //         //     'pending': 'red',
        //         //     'approved': 'black',
        //         // },
        //     },
        //     axis: {
        //         x: {
        //             type: 'category',
        //             tick: {
        //                 rotate: 0,
        //                 multiline: false
        //             }
        //         },
        //         y: {
        //             tick: {
        //                 format: d3.format('$,')
        //             },
        //             // label: {
        //             //     text: 'Money raised',
        //             //     position: 'outer-middle'
        //             // }
        //         }
        //     },
        //     grid: {
        //         x: {
        //             show: true
        //         },
        //         y: {
        //             show: true
        //         }
        //     },
        //     point: {
        //         r: 4
        //     }
        // });

        var donationsPrimary = c3.generate({
            bindto: '#donations-primary',
            data: {
                x: 'x',
                columns: [
                    ['x', 'Q1 2019', 'Q2 2019', 'Total'],
                    ['Campaign committee', 2000, 0, 2000],
                    ['Individual', 921763.86, 885872.01, 1807635.87],
                    ['Organization', 3907.7, 14890.88, 18798.58],
                    ['Other committee', 0, 83961.67, 83961.67],
                    ['Political action committee', 675416.92, 680165.79, 1355582.71],
                    ['Political party committee', 0, 44600, 44600]
                ],
                // types: {
                //     'Campaign committee': 'area-line',
                //     'Individual': 'area-line',
                //     'Organization': 'area-line',
                //     'Other committee': 'area-line',
                //     'Political action committee': 'area-line',
                //     'Political party committee': 'area-line'
                // },
                type: 'bar',
                groups: [
                    ['Campaign committee', 'Individual', 'Organization', 'Other committee', 'Political action committee', 'Political party committee']
                ],
                colors: {
                    'Campaign committee': '#003f5c',
                    'Individual': '#444e86',
                    'Organization': '#955196',
                    'Other committee': '#dd5182',
                    'Political action committee': '#ff6e54',
                    'Political party committee': '#ffa600'
                }
            },
            axis: {
                x: {
                    type: 'category'
                },
                y: {
                    tick: {
                        format: d3.format('$,'),
                        values: [1000000, 3000000, 5000000]
                    },
                    max: 5000000,
                    label: {
                        text: 'Money raised',
                        position: 'outer-middle'
                    }
                }
            },
            grid: {
                x: {
                    show: true
                },
                y: {
                    show: true
                }
            }
        });

        var donationsGeneral = c3.generate({
            bindto: '#donations-general',
            data: {
                x: 'x',
                columns: [
                    ['x', 'Q1 2019', 'Q2 2019'],
                    ['Campaign committee', 2000, 2000],
                    ['Individual', 353601.71, 680220.71],
                    ['Organization', 5500, 7700],
                    ['Other committee', 0, 37865.1],
                    ['Political action committee', 362546.26, 716329.62],
                    ['Political party committee', 0, 0]
                ],
                // types: {
                //     'Campaign committee': 'area-line',
                //     'Individual': 'area-line',
                //     'Organization': 'area-line',
                //     'Other committee': 'area-line',
                //     'Political action committee': 'area-line',
                //     'Political party committee': 'area-line'
                // },
                type: 'bar',
                groups: [
                    ['Campaign committee', 'Individual', 'Organization', 'Other committee', 'Political action committee', 'Political party committee']
                ],
                colors: {
                    'Campaign committee': '#003f5c',
                    'Individual': '#444e86',
                    'Organization': '#955196',
                    'Other committee': '#dd5182',
                    'Political action committee': '#ff6e54',
                    'Political party committee': '#ffa600'
                }
            },
            axis: {
                x: {
                    type: 'category'
                },
                y: {
                    tick: {
                        format: d3.format('$,'),
                        values: [1000000, 3000000, 5000000]
                    },
                    max: 5000000,
                    //min: 0,
                    label: {
                        text: 'Money raised',
                        position: 'outer-middle'
                    }
                }
            },
            grid: {
                x: {
                    show: true
                },
                y: {
                    show: true
                }
            }
        });

        // var chart = c3.generate({
        //     bindto: '#donation-type',
        //     data: {
        //         columns: [
        //             ['Campaign committee', 2000],
        //             ['Individual', 353601.71],
        //             ['Organization', 5500],
        //             ['Other committee', 0],
        //             ['Political action committee', 362546.26],
        //             ['Political party committee', 0]
        //         ],
        //         type: 'donut',
        //         onclick: function(d, i) { console.log("onclick", d, i); },
        //         onmouseover: function(d, i) { console.log("onmouseover", d, i); },
        //         onmouseout: function(d, i) { console.log("onmouseout", d, i); }
        //     },
        //     donut: {
        //         title: "Iris Petal Width"
        //     }
        // });



        /*** TABLE ***/
        var dataFile = '../data/gardner_july_2019_donors_modified.json';

        $(document).ready(function() {
            function disableDependentFilter(level, inuse) {
                if (level < 4) {
                    filter = $('#yadcf-filter--example-' + level);
                    yadcf.exResetFilters(bestGrantsTable, [level]);
                    filter.prop('disabled', !inuse);

                    disableDependentFilter(level + 1, false);
                }
            }

            // var donorTypes = [{ value: 'POLITICAL ACTION COMMITTEE', label: 'POLITICAL ACTION COMMITTEE' }, { value: 'POLITICAL PARTY COMMITTEE', label: 'POLITICAL PARTY COMMITTEE'}, { value: 'ORGANIZATION', label: 'ORGANIZATION' }, { value: 'CAMPAIGN COMMITTEE', label: 'CAMPAIGN COMMITTEE' }, { value: 'OTHER COMMITTEE', label: 'OTHER COMMITTEE'} ];

            var bestGrantsTable = $('#best-grants-table').DataTable({
                ajax: {
                    'url': dataFile,
                    'dataSrc': ''
                },
                pageLength: 15,
                responsive: {
                    details: {
                        type: 'column'
                    }
                },
                dom: '<if<t>lp>',
                columnDefs: [{
                    className: 'control',
                    orderable: false,
                    targets: 0
                }],
                order: [
                    [1, 'asc'],
                    [2, 'asc']
                ],
                columns: [
                    { data: 'button' },
                    {
                        data: 'committee_name',
                        visible: false
                    },
                    {
                        data: 'report_year',
                        visible: false
                    },
                    {
                        data: 'report_type',
                        visible: true
                    },
                    {
                        data: 'entity_type_desc',
                        visible: false
                    },
                    {
                        data: 'contributor_name',
                        render: function(data, type, row) {
                            if (row.contributor_aggregate_ytd < 1000 && row.entity_type_desc === 'INDIVIDUAL') {
                                return '*'
                            } else return data

                        }
                    },
                    {
                        data: 'contributor_city',
                        visible: true
                    },
                    {
                        data: 'contributor_state',
                        visible: true
                    },
                    {
                        data: 'contributor_zip',
                        visible: false
                    },
                    { data: 'contributor_employer' },
                    {
                        data: 'contributor_occupation',
                        render: function(data, type, row) {
                            if (row.contributor_aggregate_ytd < 1000 && row.entity_type_desc === 'INDIVIDUAL') {
                                return '*'
                            } else return data

                        }
                    },
                    {
                        data: 'receipt_type_full',
                        visible: false
                    },
                    { data: 'contribution_receipt_amount' },
                    { data: 'contributor_aggregate_ytd' },
                    { data: 'fec_election_type_desc' },
                    {
                        data: 'pdf_url',
                        visible: false
                    }
                ],

                initComplete: function() {
                    yadcf.init(bestGrantsTable, [{
                            column_number: 4,
                            filter_container_id: 'filter-1',
                            filter_default_label: 'Filter by donor type',
                            //data: donorTypes
                        },
                        {
                            column_number: 5,
                            filter_container_id: 'filter-2',
                            filter_default_label: 'Filter by donor name'
                        },
                        {
                            column_number: 9,
                            filter_container_id: 'filter-3',
                            filter_default_label: 'Filter by donor employer'
                        },
                    ], {
                        cumulative_filtering: true,
                        filter_reset_button_text: 'Reset filter'
                    });

                    // get it started
                    disableDependentFilter(1, true);

                    $('.yadcf-filter-reset-button').on('click', function() {
                        level = parseInt(this.id.split('-')[1]);
                        disableDependentFilter(level, true);
                    });

                    $('.yadcf-filter').on('change', function() {
                        level = parseInt(this.id.slice(-1));
                        inuse = $(this).hasClass('inuse');

                        disableDependentFilter(level + 1, inuse);
                    });
                }
            });
        });
        </script>
</body>

</html>